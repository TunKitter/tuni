(()=>{"use strict";var e={879:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function u(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=n(433),u=i(n(500)),a=n(221);new MutationObserver(((e,t)=>o(void 0,void 0,void 0,(function*(){"complete"===document.readyState&&!document.querySelector("#tunkit_interactive_button")&&document.querySelector(".ytp-subtitles-button.ytp-button")&&((0,r.insertToggleIconMenu)(),yield(0,r.insertComponent)(),(0,r.insertMenuPanel)(),(0,a.handleToggleMenuSwitcherIcon)(),(0,r.handelTogglePanel)(),(0,u.default)(),(0,a.handleChangeViewPanel)(),t.disconnect())})))).observe(document,{childList:!0,subtree:!0})},433:function(e,t,n){var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),u=0;u<n.length;u++)"default"!==n[u]&&i(t,e,n[u]);return r(t,e),t}),a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function u(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.component_wrapper=void 0,t.insertToggleIconMenu=function(){const e=document.querySelector(".ytp-subtitles-button.ytp-button");if(null==e)throw new Error("Can't insert trigger button");const t=document.createElement("button");t.classList.add("ytp-button"),t.id="tunkit_interactive_button",t.innerHTML=`<img id="tunkit_svg" aria-pressed="false" class="ytp-svg-shadow" src="${(0,l._getURL)("icons/panel_icon.svg")}"/>`,e.insertAdjacentElement("afterend",t)},t.insertComponent=function(){return a(this,void 0,void 0,(function*(){yield fetch((0,l._getURL)("static/bundle.html")).then((e=>e.text())).then((function(e){const n=(0,l._getURL)("icons/");e=e.replaceAll(/{{icon\./g,n).replaceAll("}}",".svg"),t.component_wrapper.innerHTML=e,(0,c.initAfterInsertComponent)()}))}))},t.insertMenuPanel=function(){var e;null===(e=document.querySelector(".ytp-popup.ytp-settings-menu"))||void 0===e||e.insertAdjacentElement("afterend",c.default.PANEL_WRAPPER)},t.handelTogglePanel=function(){const e=document.querySelector("#tunkit_interactive_button");if(null==e)throw new Error("Can't find trigger button");e.addEventListener("click",(()=>c.default.PANEL_WRAPPER.classList.toggle("tunkit_menu_active")))};const l=n(666),c=u(n(934));t.component_wrapper=document.createElement("div")},834:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(666);t.default=class{static from(e){return{getAll:()=>chrome.runtime.sendMessage({type:"GET_ALL_TEMPLATE",youtubeID:e}),get:t=>chrome.runtime.sendMessage({type:"GET_TEMPLATE",youtubeID:e,id:t}),insert(t){const n=(0,o.randomString)();return chrome.runtime.sendMessage({type:"INSERT_TEMPLATE",youtubeID:e,id:n,data:t})},remove:t=>chrome.runtime.sendMessage({type:"REMOVE_TEMPLATE",youtubeID:e,id:t})}}}},500:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){navigation.addEventListener("navigate",(()=>{var e;null===(e=i.default.PANEL_WRAPPER)||void 0===e||e.classList.remove("tunkit_menu_active")}))};const i=o(n(934))},221:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleShowPanel=u,t.handleChangeViewPanel=function(){u(i.default.PANEL_WRAPPER,(function(e,t){if(0!=c())switch(e.dataset.tunkitPanel){case"main":t();break;case"template":if(t(),i.default.IS_GET_TEMPLATE)break;alert("okkk"),(0,r.handleLoadTemplate)(),i.default.IS_GET_TEMPLATE=!0}}))},t.showPanel=a,t.handleToggleMenuSwitcherIcon=function(){var e,t;null===(t=null===(e=i.default.PANEL_WRAPPER)||void 0===e?void 0:e.querySelector("#tunkit_toggle_interactive_video"))||void 0===t||t.addEventListener("click",(function(){l(!c())}))},t.setActivePanel=l,t.getActivePanel=c,t.setDisableItems=function(e,t,n){e.querySelectorAll(t).forEach((e=>{e.style.opacity=n?"0.5":"1"}))};const i=o(n(934)),r=n(262);function u(e,t=void 0){e.querySelectorAll("*[data-tunkit-panel]").forEach((e=>{e.addEventListener("click",(function(){void 0!==t&&t(e,(function(){a(".tunkit_panel.panel_"+e.dataset.tunkitPanel,e.dataset.tunkitType)}))}))}))}function a(e,t,n=document){var o,i,r,u;null===(i=null===(o=n.querySelector("."+t))||void 0===o?void 0:o.classList)||void 0===i||i.remove(t),null===(u=null===(r=n.querySelector(e))||void 0===r?void 0:r.classList)||void 0===u||u.add(t)}function l(e){var t,n;(null===(t=i.default.PANEL_WRAPPER)||void 0===t?void 0:t.querySelector("#tunkit_toggle_interactive_video")).setAttribute("aria-checked",e?"true":"false"),(null===(n=i.default.PANEL_WRAPPER)||void 0===n?void 0:n.querySelector(".tunkit_content")).style.opacity=e?"1":"0.5"}function c(){var e;return"true"==(null===(e=i.default.PANEL_WRAPPER)||void 0===e?void 0:e.querySelector("#tunkit_toggle_interactive_video")).getAttribute("aria-checked")}},262:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function u(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}l((o=o.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handleLoadTemplate=function(){return o(this,void 0,void 0,(function*(){var e;const t=null===(e=a.default.PANEL_WRAPPER)||void 0===e?void 0:e.querySelector("#tunkit_loader.loader_template");t.style.display="block",a.default.TEMPLATE_PANEL_WRAPPER.innerHTML="",yield r.default.from((0,u.getCurrentYoutubeId)()).getAll(),t.style.display="none"}))},t.getTemplateItemComponent=function(){const e=(0,u.getComponent)(".tunkit_template_panel_item",!1);a.default.TEMPLATE_PANEL_WRAPPER.appendChild(e)};const r=i(n(834)),u=n(666),a=i(n(934))},666:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._getURL=function(e){return chrome.runtime.getURL(`assets/${e}`)},t.getComponent=function(e,t=!0){const n=o.component_wrapper.querySelector(`${e}`);if(null==n)throw new Error("Can't find component");const i=n.cloneNode(!0);return 1==t&&n.remove(),i},t.randomString=function(){return"_"+(Date.now()+Math.random()+1).toString(36).replaceAll(".","")},t.getCurrentYoutubeId=function(){const e=new URLSearchParams(window.location.search).get("v");if(null==e)throw new Error("Can't get youtubeID");return e};const o=n(433)},934:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initAfterInsertComponent=function(){var e;i.PANEL_WRAPPER=(0,o.getComponent)(".tunkit_panel_wrapper"),i.TEMPLATE_PANEL_WRAPPER=null===(e=i.PANEL_WRAPPER)||void 0===e?void 0:e.querySelector(".tunkit_template_wrapper")};const o=n(666),i={PANEL_WRAPPER:null,IS_GET_TEMPLATE:!1,TEMPLATE_PANEL_WRAPPER:null};t.default=i}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(879)})();